"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/generate-emojis/route";
exports.ids = ["app/api/generate-emojis/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-emojis%2Froute&page=%2Fapi%2Fgenerate-emojis%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-emojis%2Froute.ts&appDir=F%3A%5Cemjio%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=F%3A%5Cemjio&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-emojis%2Froute&page=%2Fapi%2Fgenerate-emojis%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-emojis%2Froute.ts&appDir=F%3A%5Cemjio%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=F%3A%5Cemjio&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var F_emjio_app_api_generate_emojis_route_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/api/generate-emojis/route.ts */ \"(rsc)/./app/api/generate-emojis/route.ts\");\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/generate-emojis/route\",\n        pathname: \"/api/generate-emojis\",\n        filename: \"route\",\n        bundlePath: \"app/api/generate-emojis/route\"\n    },\n    resolvedPagePath: \"F:\\\\emjio\\\\app\\\\api\\\\generate-emojis\\\\route.ts\",\n    nextConfigOutput,\n    userland: F_emjio_app_api_generate_emojis_route_ts__WEBPACK_IMPORTED_MODULE_2__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/generate-emojis/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW5lcmF0ZS1lbW9qaXMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmdlbmVyYXRlLWVtb2ppcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmdlbmVyYXRlLWVtb2ppcyUyRnJvdXRlLnRzJmFwcERpcj1GJTNBJTVDZW1qaW8lNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUYlM0ElNUNlbWppbyZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDWTtBQUMzRTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNpSjs7QUFFakoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1lbW9qaS1nZW5lcmF0b3IvP2U2YmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiRjpcXFxcZW1qaW9cXFxcYXBwXFxcXGFwaVxcXFxnZW5lcmF0ZS1lbW9qaXNcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2dlbmVyYXRlLWVtb2ppcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2dlbmVyYXRlLWVtb2ppc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZ2VuZXJhdGUtZW1vamlzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiRjpcXFxcZW1qaW9cXFxcYXBwXFxcXGFwaVxcXFxnZW5lcmF0ZS1lbW9qaXNcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvZ2VuZXJhdGUtZW1vamlzL3JvdXRlXCI7XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-emojis%2Froute&page=%2Fapi%2Fgenerate-emojis%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-emojis%2Froute.ts&appDir=F%3A%5Cemjio%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=F%3A%5Cemjio&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/generate-emojis/route.ts":
/*!******************************************!*\
  !*** ./app/api/generate-emojis/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_1__);\n\n\nasync function POST(request) {\n    console.log(\"=== 使用的是 route.ts 文件 ===\");\n    try {\n        const { subjectDescription, keywords } = await request.json();\n        // 验证输入\n        // if (!subjectDescription || !keywords || keywords.length !== 16) {\n        if (!subjectDescription || !keywords || keywords.length !== 2) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"输入参数不完整\"\n            }, {\n                status: 400\n            });\n        }\n        // 验证环境变量\n        if (!process.env.VOLC_ACCESS_KEY || !process.env.VOLC_SECRET_KEY) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"服务器配置错误：缺少API密钥\"\n            }, {\n                status: 500\n            });\n        }\n        const emojis = [];\n        // 为每个关键词生成表情包\n        for(let i = 0; i < keywords.length; i++){\n            const keyword = keywords[i];\n            const prompt = `${subjectDescription}, ${keyword}, 表情包风格, 简洁背景, 高质量, 卡通风格`;\n            try {\n                // 调用即梦AI生成图片\n                const imageData = await generateImageWithVolcAI(prompt);\n                emojis.push({\n                    id: i + 1,\n                    keyword: keyword,\n                    imageData: imageData\n                });\n                // 添加延迟避免API限制\n                await new Promise((resolve)=>setTimeout(resolve, 1000));\n            } catch (error) {\n                console.error(`生成第${i + 1}张图片失败:`, error);\n                // 如果单张图片生成失败，使用占位图片\n                emojis.push({\n                    id: i + 1,\n                    keyword: keyword,\n                    imageData: generatePlaceholderImage(keyword)\n                });\n            }\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            emojis\n        });\n    } catch (error) {\n        console.error(\"生成表情包失败:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"服务器内部错误\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function generateImageWithVolcAI(prompt) {\n    const accessKey = process.env.VOLC_ACCESS_KEY;\n    const secretKey = process.env.VOLC_SECRET_KEY;\n    const region = \"cn-north-1\";\n    const service = \"cv\";\n    const host = \"visual.volcengineapi.com\";\n    const endpoint = \"https://visual.volcengineapi.com\";\n    // 请求参数\n    const requestBody = {\n        req_key: \"jimeng_high_aes_general_v21_L\",\n        prompt: prompt,\n        width: 512,\n        height: 512,\n        scale: 7.5,\n        seed: -1,\n        ddim_steps: 25,\n        return_url: true,\n        use_sr: false,\n        logo_info: {\n            add_logo: false\n        }\n    };\n    const bodyString = JSON.stringify(requestBody);\n    // 构建查询参数\n    const queryParams = {\n        \"Action\": \"CVProcess\",\n        \"Version\": \"2022-08-31\"\n    };\n    // 格式化查询字符串\n    const formatQuery = (parameters)=>{\n        let requestParameters = \"\";\n        for (const key of Object.keys(parameters).sort()){\n            requestParameters += key + \"=\" + parameters[key] + \"&\";\n        }\n        return requestParameters.slice(0, -1);\n    };\n    const canonicalQuerystring = formatQuery(queryParams);\n    // 生成时间戳\n    const t = new Date();\n    const currentDate = t.toISOString().replace(/[-:]/g, \"\").replace(/\\.\\d{3}/, \"\");\n    const datestamp = currentDate.split(\"T\")[0];\n    // 计算payload hash\n    const payloadHash = crypto__WEBPACK_IMPORTED_MODULE_1___default().createHash(\"sha256\").update(bodyString).digest(\"hex\");\n    // 构建canonical headers\n    const contentType = \"application/json\";\n    const canonicalHeaders = \"content-type:\" + contentType + \"\\n\" + \"host:\" + host + \"\\n\" + \"x-content-sha256:\" + payloadHash + \"\\n\" + \"x-date:\" + currentDate + \"\\n\";\n    const signedHeaders = \"content-type;host;x-content-sha256;x-date\";\n    // 创建canonical request\n    const canonicalRequest = [\n        \"POST\",\n        \"/\",\n        canonicalQuerystring,\n        canonicalHeaders,\n        signedHeaders,\n        payloadHash\n    ].join(\"\\n\");\n    // 创建string to sign\n    const algorithm = \"HMAC-SHA256\";\n    const credentialScope = `${datestamp}/${region}/${service}/request`;\n    const stringToSign = [\n        algorithm,\n        currentDate,\n        credentialScope,\n        crypto__WEBPACK_IMPORTED_MODULE_1___default().createHash(\"sha256\").update(canonicalRequest).digest(\"hex\")\n    ].join(\"\\n\");\n    // 计算签名\n    const sign = (key, msg)=>{\n        return crypto__WEBPACK_IMPORTED_MODULE_1___default().createHmac(\"sha256\", key).update(msg).digest();\n    };\n    const kDate = sign(secretKey, datestamp);\n    const kRegion = sign(kDate, region);\n    const kService = sign(kRegion, service);\n    const kSigning = sign(kService, \"request\");\n    const signature = crypto__WEBPACK_IMPORTED_MODULE_1___default().createHmac(\"sha256\", kSigning).update(stringToSign).digest(\"hex\");\n    // 构建Authorization头\n    const authorizationHeader = `${algorithm} Credential=${accessKey}/${credentialScope}, SignedHeaders=${signedHeaders}, Signature=${signature}`;\n    // 构建请求头\n    const headers = {\n        \"X-Date\": currentDate,\n        \"Authorization\": authorizationHeader,\n        \"X-Content-Sha256\": payloadHash,\n        \"Content-Type\": contentType,\n        \"Host\": host\n    };\n    // 发送请求\n    const requestUrl = `${endpoint}?${canonicalQuerystring}`;\n    const response = await fetch(requestUrl, {\n        method: \"POST\",\n        headers: headers,\n        body: bodyString\n    });\n    if (!response.ok) {\n        const errorText = await response.text();\n        console.error(\"即梦AI API错误响应:\", errorText);\n        throw new Error(`即梦AI API请求失败: ${response.status} ${response.statusText}`);\n    }\n    const result = await response.json();\n    console.log(\"即梦AI响应:\", result);\n    console.log(\"---------------------------------------\", result.code === 10000 && result.data);\n    // 处理响应 - 根据实际返回格式调整\n    if (result.code === 10000 && result.data) {\n        // 检查是否有图片URL\n        if (result.data.image_urls && result.data.image_urls.length > 0) {\n            const imageUrl = result.data.image_urls[0];\n            console.log(\"获取到图片URL:\", imageUrl);\n            // 添加调试代码\n            console.log(\"开始下载图片...\");\n            // 下载图片并转换为base64\n            const imageResponse = await fetch(imageUrl);\n            if (!imageResponse.ok) {\n                throw new Error(`下载图片失败: ${imageResponse.status}`);\n            }\n            const imageBuffer = await imageResponse.arrayBuffer();\n            const base64 = Buffer.from(imageBuffer).toString(\"base64\");\n            // 添加调试代码\n            console.log(\"图片下载完成\");\n            return `data:image/png;base64,${base64}`;\n        }\n        // 检查是否有base64数据\n        if (result.data.binary_data_base64 && result.data.binary_data_base64.length > 0) {\n            const base64Data = result.data.binary_data_base64[0];\n            // 添加调试代码\n            console.log(\"获取到base64数据\");\n            return `data:image/png;base64,${base64Data}`;\n        }\n        throw new Error(\"响应中没有找到图片数据\");\n    } else {\n        console.error(\"即梦AI返回错误:\", result);\n        throw new Error(`即梦AI返回错误: ${result.message || \"未知错误\"}`);\n    }\n}\nfunction generatePlaceholderImage(keyword) {\n    // 生成SVG格式的占位图片\n    const colors = [\n        \"#FF6B6B\",\n        \"#4ECDC4\",\n        \"#45B7D1\",\n        \"#96CEB4\",\n        \"#FFEAA7\",\n        \"#DDA0DD\",\n        \"#98D8C8\",\n        \"#F7DC6F\"\n    ];\n    const colorIndex = keyword.length % colors.length;\n    const color = colors[colorIndex];\n    const svg = `\r\n        <svg width=\"240\" height=\"240\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <rect width=\"240\" height=\"240\" fill=\"${color}\"/>\r\n            <text x=\"120\" y=\"120\" font-family=\"Arial, sans-serif\" font-size=\"24\" font-weight=\"bold\" \r\n                    text-anchor=\"middle\" dominant-baseline=\"middle\" fill=\"white\">${keyword}</text>\r\n        </svg>\r\n    `;\n    const base64 = Buffer.from(svg).toString(\"base64\");\n    return `data:image/svg+xml;base64,${base64}`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUlGLE1BQU0sQ0FBQyxVQUFVLEVBQUVFLE9BQU9jLE9BQU8sSUFBSSxPQUFPLENBQUM7SUFDM0Q7QUFDSjtBQUVBLFNBQVNwRix5QkFBeUJULE9BQWU7SUFDN0MsZUFBZTtJQUNmLE1BQU04RixTQUFTO1FBQUM7UUFBVztRQUFXO1FBQVc7UUFBVztRQUFXO1FBQVc7UUFBVztLQUFVO0lBQ3ZHLE1BQU1DLGFBQWEvRixRQUFRVCxNQUFNLEdBQUd1RyxPQUFPdkcsTUFBTTtJQUNqRCxNQUFNeUcsUUFBUUYsTUFBTSxDQUFDQyxXQUFXO0lBRWhDLE1BQU1FLE1BQU0sQ0FBQzs7aURBRWdDLEVBQUVELE1BQU07O2lGQUV3QixFQUFFaEcsUUFBUTs7SUFFdkYsQ0FBQztJQUVELE1BQU11RixTQUFTQyxPQUFPQyxJQUFJLENBQUNRLEtBQUtQLFFBQVEsQ0FBQztJQUN6QyxPQUFPLENBQUMsMEJBQTBCLEVBQUVILE9BQU8sQ0FBQztBQUNoRCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWVtb2ppLWdlbmVyYXRvci8uL2FwcC9hcGkvZ2VuZXJhdGUtZW1vamlzL3JvdXRlLnRzP2U4NjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nO1xyXG5cclxuaW50ZXJmYWNlIEdlbmVyYXRlZEVtb2ppIHtcclxuICAgIGlkOiBudW1iZXI7XHJcbiAgICBrZXl3b3JkOiBzdHJpbmc7XHJcbiAgICBpbWFnZURhdGE6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICAgIGNvbnNvbGUubG9nKCc9PT0g5L2/55So55qE5pivIHJvdXRlLnRzIOaWh+S7tiA9PT0nKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHsgc3ViamVjdERlc2NyaXB0aW9uLCBrZXl3b3JkcyB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XHJcblxyXG4gICAgICAgIC8vIOmqjOivgei+k+WFpVxyXG4gICAgICAgIC8vIGlmICghc3ViamVjdERlc2NyaXB0aW9uIHx8ICFrZXl3b3JkcyB8fCBrZXl3b3Jkcy5sZW5ndGggIT09IDE2KSB7XHJcbiAgICAgICAgaWYgKCFzdWJqZWN0RGVzY3JpcHRpb24gfHwgIWtleXdvcmRzIHx8IGtleXdvcmRzLmxlbmd0aCAhPT0gMikge1xyXG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgICAgICB7IGVycm9yOiAn6L6T5YWl5Y+C5pWw5LiN5a6M5pW0JyB9LFxyXG4gICAgICAgICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDpqozor4Hnjq/looPlj5jph49cclxuICAgICAgICBpZiAoIXByb2Nlc3MuZW52LlZPTENfQUNDRVNTX0tFWSB8fCAhcHJvY2Vzcy5lbnYuVk9MQ19TRUNSRVRfS0VZKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgICAgICAgIHsgZXJyb3I6ICfmnI3liqHlmajphY3nva7plJnor6/vvJrnvLrlsJFBUEnlr4bpkqUnIH0sXHJcbiAgICAgICAgICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGVtb2ppczogR2VuZXJhdGVkRW1vamlbXSA9IFtdO1xyXG5cclxuICAgICAgICAvLyDkuLrmr4/kuKrlhbPplK7or43nlJ/miJDooajmg4XljIVcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXdvcmRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGtleXdvcmQgPSBrZXl3b3Jkc1tpXTtcclxuICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gYCR7c3ViamVjdERlc2NyaXB0aW9ufSwgJHtrZXl3b3JkfSwg6KGo5oOF5YyF6aOO5qC8LCDnroDmtIHog4zmma8sIOmrmOi0qOmHjywg5Y2h6YCa6aOO5qC8YDtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAvLyDosIPnlKjljbPmoqZBSeeUn+aIkOWbvueJh1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW1hZ2VEYXRhID0gYXdhaXQgZ2VuZXJhdGVJbWFnZVdpdGhWb2xjQUkocHJvbXB0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBlbW9qaXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGkgKyAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6IGtleXdvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VEYXRhOiBpbWFnZURhdGEsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDmt7vliqDlu7bov5/pgb/lhY1BUEnpmZDliLZcclxuICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGDnlJ/miJDnrKwke2kgKyAxfeW8oOWbvueJh+Wksei0pTpgLCBlcnJvcik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5Y2V5byg5Zu+54mH55Sf5oiQ5aSx6LSl77yM5L2/55So5Y2g5L2N5Zu+54mHXHJcbiAgICAgICAgICAgICAgICBlbW9qaXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGkgKyAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6IGtleXdvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VEYXRhOiBnZW5lcmF0ZVBsYWNlaG9sZGVySW1hZ2Uoa2V5d29yZCksXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZW1vamlzIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCfnlJ/miJDooajmg4XljIXlpLHotKU6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgICAgeyBlcnJvcjogJ+acjeWKoeWZqOWGhemDqOmUmeivrycgfSxcclxuICAgICAgICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVJbWFnZVdpdGhWb2xjQUkocHJvbXB0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgY29uc3QgYWNjZXNzS2V5ID0gcHJvY2Vzcy5lbnYuVk9MQ19BQ0NFU1NfS0VZITtcclxuICAgIGNvbnN0IHNlY3JldEtleSA9IHByb2Nlc3MuZW52LlZPTENfU0VDUkVUX0tFWSE7XHJcbiAgICBjb25zdCByZWdpb24gPSAnY24tbm9ydGgtMSc7XHJcbiAgICBjb25zdCBzZXJ2aWNlID0gJ2N2JztcclxuICAgIGNvbnN0IGhvc3QgPSAndmlzdWFsLnZvbGNlbmdpbmVhcGkuY29tJztcclxuICAgIGNvbnN0IGVuZHBvaW50ID0gJ2h0dHBzOi8vdmlzdWFsLnZvbGNlbmdpbmVhcGkuY29tJztcclxuXHJcbiAgICAvLyDor7fmsYLlj4LmlbBcclxuICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xyXG4gICAgICAgIHJlcV9rZXk6ICdqaW1lbmdfaGlnaF9hZXNfZ2VuZXJhbF92MjFfTCcsXHJcbiAgICAgICAgcHJvbXB0OiBwcm9tcHQsXHJcbiAgICAgICAgd2lkdGg6IDUxMixcclxuICAgICAgICBoZWlnaHQ6IDUxMixcclxuICAgICAgICBzY2FsZTogNy41LFxyXG4gICAgICAgIHNlZWQ6IC0xLFxyXG4gICAgICAgIGRkaW1fc3RlcHM6IDI1LFxyXG4gICAgICAgIHJldHVybl91cmw6IHRydWUsXHJcbiAgICAgICAgdXNlX3NyOiBmYWxzZSxcclxuICAgICAgICBsb2dvX2luZm86IHtcclxuICAgICAgICAgICAgYWRkX2xvZ286IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBib2R5U3RyaW5nID0gSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpO1xyXG5cclxuICAgIC8vIOaehOW7uuafpeivouWPguaVsFxyXG4gICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7XHJcbiAgICAgICAgJ0FjdGlvbic6ICdDVlByb2Nlc3MnLFxyXG4gICAgICAgICdWZXJzaW9uJzogJzIwMjItMDgtMzEnXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIOagvOW8j+WMluafpeivouWtl+espuS4slxyXG4gICAgY29uc3QgZm9ybWF0UXVlcnkgPSAocGFyYW1ldGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPikgPT4ge1xyXG4gICAgICAgIGxldCByZXF1ZXN0UGFyYW1ldGVycyA9ICcnO1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHBhcmFtZXRlcnMpLnNvcnQoKSkge1xyXG4gICAgICAgICAgICByZXF1ZXN0UGFyYW1ldGVycyArPSBrZXkgKyAnPScgKyBwYXJhbWV0ZXJzW2tleV0gKyAnJic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXF1ZXN0UGFyYW1ldGVycy5zbGljZSgwLCAtMSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGNhbm9uaWNhbFF1ZXJ5c3RyaW5nID0gZm9ybWF0UXVlcnkocXVlcnlQYXJhbXMpO1xyXG5cclxuICAgIC8vIOeUn+aIkOaXtumXtOaIs1xyXG4gICAgY29uc3QgdCA9IG5ldyBEYXRlKCk7XHJcbiAgICBjb25zdCBjdXJyZW50RGF0ZSA9IHQudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9bLTpdL2csICcnKS5yZXBsYWNlKC9cXC5cXGR7M30vLCAnJyk7XHJcbiAgICBjb25zdCBkYXRlc3RhbXAgPSBjdXJyZW50RGF0ZS5zcGxpdCgnVCcpWzBdO1xyXG5cclxuICAgIC8vIOiuoeeul3BheWxvYWQgaGFzaFxyXG4gICAgY29uc3QgcGF5bG9hZEhhc2ggPSBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKGJvZHlTdHJpbmcpLmRpZ2VzdCgnaGV4Jyk7XHJcblxyXG4gICAgLy8g5p6E5bu6Y2Fub25pY2FsIGhlYWRlcnNcclxuICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xyXG4gICAgY29uc3QgY2Fub25pY2FsSGVhZGVycyA9XHJcbiAgICAgICAgJ2NvbnRlbnQtdHlwZTonICsgY29udGVudFR5cGUgKyAnXFxuJyArXHJcbiAgICAgICAgJ2hvc3Q6JyArIGhvc3QgKyAnXFxuJyArXHJcbiAgICAgICAgJ3gtY29udGVudC1zaGEyNTY6JyArIHBheWxvYWRIYXNoICsgJ1xcbicgK1xyXG4gICAgICAgICd4LWRhdGU6JyArIGN1cnJlbnREYXRlICsgJ1xcbic7XHJcblxyXG4gICAgY29uc3Qgc2lnbmVkSGVhZGVycyA9ICdjb250ZW50LXR5cGU7aG9zdDt4LWNvbnRlbnQtc2hhMjU2O3gtZGF0ZSc7XHJcblxyXG4gICAgLy8g5Yib5bu6Y2Fub25pY2FsIHJlcXVlc3RcclxuICAgIGNvbnN0IGNhbm9uaWNhbFJlcXVlc3QgPSBbXHJcbiAgICAgICAgJ1BPU1QnLFxyXG4gICAgICAgICcvJyxcclxuICAgICAgICBjYW5vbmljYWxRdWVyeXN0cmluZyxcclxuICAgICAgICBjYW5vbmljYWxIZWFkZXJzLFxyXG4gICAgICAgIHNpZ25lZEhlYWRlcnMsXHJcbiAgICAgICAgcGF5bG9hZEhhc2hcclxuICAgIF0uam9pbignXFxuJyk7XHJcblxyXG4gICAgLy8g5Yib5bu6c3RyaW5nIHRvIHNpZ25cclxuICAgIGNvbnN0IGFsZ29yaXRobSA9ICdITUFDLVNIQTI1Nic7XHJcbiAgICBjb25zdCBjcmVkZW50aWFsU2NvcGUgPSBgJHtkYXRlc3RhbXB9LyR7cmVnaW9ufS8ke3NlcnZpY2V9L3JlcXVlc3RgO1xyXG4gICAgY29uc3Qgc3RyaW5nVG9TaWduID0gW1xyXG4gICAgICAgIGFsZ29yaXRobSxcclxuICAgICAgICBjdXJyZW50RGF0ZSxcclxuICAgICAgICBjcmVkZW50aWFsU2NvcGUsXHJcbiAgICAgICAgY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShjYW5vbmljYWxSZXF1ZXN0KS5kaWdlc3QoJ2hleCcpXHJcbiAgICBdLmpvaW4oJ1xcbicpO1xyXG5cclxuICAgIC8vIOiuoeeul+etvuWQjVxyXG4gICAgY29uc3Qgc2lnbiA9IChrZXk6IEJ1ZmZlciB8IHN0cmluZywgbXNnOiBzdHJpbmcpOiBCdWZmZXIgPT4ge1xyXG4gICAgICAgIHJldHVybiBjcnlwdG8uY3JlYXRlSG1hYygnc2hhMjU2Jywga2V5KS51cGRhdGUobXNnKS5kaWdlc3QoKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3Qga0RhdGUgPSBzaWduKHNlY3JldEtleSwgZGF0ZXN0YW1wKTtcclxuICAgIGNvbnN0IGtSZWdpb24gPSBzaWduKGtEYXRlLCByZWdpb24pO1xyXG4gICAgY29uc3Qga1NlcnZpY2UgPSBzaWduKGtSZWdpb24sIHNlcnZpY2UpO1xyXG4gICAgY29uc3Qga1NpZ25pbmcgPSBzaWduKGtTZXJ2aWNlLCAncmVxdWVzdCcpO1xyXG4gICAgY29uc3Qgc2lnbmF0dXJlID0gY3J5cHRvLmNyZWF0ZUhtYWMoJ3NoYTI1NicsIGtTaWduaW5nKS51cGRhdGUoc3RyaW5nVG9TaWduKS5kaWdlc3QoJ2hleCcpO1xyXG5cclxuICAgIC8vIOaehOW7ukF1dGhvcml6YXRpb27lpLRcclxuICAgIGNvbnN0IGF1dGhvcml6YXRpb25IZWFkZXIgPSBgJHthbGdvcml0aG19IENyZWRlbnRpYWw9JHthY2Nlc3NLZXl9LyR7Y3JlZGVudGlhbFNjb3BlfSwgU2lnbmVkSGVhZGVycz0ke3NpZ25lZEhlYWRlcnN9LCBTaWduYXR1cmU9JHtzaWduYXR1cmV9YDtcclxuXHJcbiAgICAvLyDmnoTlu7ror7fmsYLlpLRcclxuICAgIGNvbnN0IGhlYWRlcnMgPSB7XHJcbiAgICAgICAgJ1gtRGF0ZSc6IGN1cnJlbnREYXRlLFxyXG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYXV0aG9yaXphdGlvbkhlYWRlcixcclxuICAgICAgICAnWC1Db250ZW50LVNoYTI1Nic6IHBheWxvYWRIYXNoLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiBjb250ZW50VHlwZSxcclxuICAgICAgICAnSG9zdCc6IGhvc3RcclxuICAgIH07XHJcblxyXG4gICAgLy8g5Y+R6YCB6K+35rGCXHJcbiAgICBjb25zdCByZXF1ZXN0VXJsID0gYCR7ZW5kcG9pbnR9PyR7Y2Fub25pY2FsUXVlcnlzdHJpbmd9YDtcclxuXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHJlcXVlc3RVcmwsIHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IGJvZHlTdHJpbmdcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcign5Y2z5qKmQUkgQVBJ6ZSZ6K+v5ZON5bqUOicsIGVycm9yVGV4dCk7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDljbPmoqZBSSBBUEnor7fmsYLlpLHotKU6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgY29uc29sZS5sb2coJ+WNs+aipkFJ5ZON5bqUOicsIHJlc3VsdCk7XHJcblxyXG4gICAgY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScsIHJlc3VsdC5jb2RlID09PSAxMDAwMCAmJiByZXN1bHQuZGF0YSlcclxuICAgIC8vIOWkhOeQhuWTjeW6lCAtIOagueaNruWunumZhei/lOWbnuagvOW8j+iwg+aVtFxyXG4gICAgaWYgKHJlc3VsdC5jb2RlID09PSAxMDAwMCAmJiByZXN1bHQuZGF0YSkge1xyXG4gICAgICAgIC8vIOajgOafpeaYr+WQpuacieWbvueJh1VSTFxyXG4gICAgICAgIGlmIChyZXN1bHQuZGF0YS5pbWFnZV91cmxzICYmIHJlc3VsdC5kYXRhLmltYWdlX3VybHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBpbWFnZVVybCA9IHJlc3VsdC5kYXRhLmltYWdlX3VybHNbMF07XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfojrflj5bliLDlm77niYdVUkw6JywgaW1hZ2VVcmwpO1xyXG5cclxuICAgICAgICAgICAgLy8g5re75Yqg6LCD6K+V5Luj56CBXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCflvIDlp4vkuIvovb3lm77niYcuLi4nKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOS4i+i9veWbvueJh+W5tui9rOaNouS4umJhc2U2NFxyXG4gICAgICAgICAgICBjb25zdCBpbWFnZVJlc3BvbnNlID0gYXdhaXQgZmV0Y2goaW1hZ2VVcmwpO1xyXG4gICAgICAgICAgICBpZiAoIWltYWdlUmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihg5LiL6L295Zu+54mH5aSx6LSlOiAke2ltYWdlUmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpbWFnZUJ1ZmZlciA9IGF3YWl0IGltYWdlUmVzcG9uc2UuYXJyYXlCdWZmZXIoKTtcclxuICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gQnVmZmVyLmZyb20oaW1hZ2VCdWZmZXIpLnRvU3RyaW5nKCdiYXNlNjQnKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOa3u+WKoOiwg+ivleS7o+eggVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn5Zu+54mH5LiL6L295a6M5oiQJyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwke2Jhc2U2NH1gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5qOA5p+l5piv5ZCm5pyJYmFzZTY05pWw5o2uXHJcbiAgICAgICAgaWYgKHJlc3VsdC5kYXRhLmJpbmFyeV9kYXRhX2Jhc2U2NCAmJiByZXN1bHQuZGF0YS5iaW5hcnlfZGF0YV9iYXNlNjQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBiYXNlNjREYXRhID0gcmVzdWx0LmRhdGEuYmluYXJ5X2RhdGFfYmFzZTY0WzBdO1xyXG5cclxuICAgICAgICAgICAgLy8g5re75Yqg6LCD6K+V5Luj56CBXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfojrflj5bliLBiYXNlNjTmlbDmja4nKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBgZGF0YTppbWFnZS9wbmc7YmFzZTY0LCR7YmFzZTY0RGF0YX1gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCflk43lupTkuK3msqHmnInmib7liLDlm77niYfmlbDmja4nKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcign5Y2z5qKmQUnov5Tlm57plJnor686JywgcmVzdWx0KTtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYOWNs+aipkFJ6L+U5Zue6ZSZ6K+vOiAke3Jlc3VsdC5tZXNzYWdlIHx8ICfmnKrnn6XplJnor68nfWApO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZVBsYWNlaG9sZGVySW1hZ2Uoa2V5d29yZDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIC8vIOeUn+aIkFNWR+agvOW8j+eahOWNoOS9jeWbvueJh1xyXG4gICAgY29uc3QgY29sb3JzID0gWycjRkY2QjZCJywgJyM0RUNEQzQnLCAnIzQ1QjdEMScsICcjOTZDRUI0JywgJyNGRkVBQTcnLCAnI0REQTBERCcsICcjOThEOEM4JywgJyNGN0RDNkYnXTtcclxuICAgIGNvbnN0IGNvbG9ySW5kZXggPSBrZXl3b3JkLmxlbmd0aCAlIGNvbG9ycy5sZW5ndGg7XHJcbiAgICBjb25zdCBjb2xvciA9IGNvbG9yc1tjb2xvckluZGV4XTtcclxuXHJcbiAgICBjb25zdCBzdmcgPSBgXHJcbiAgICAgICAgPHN2ZyB3aWR0aD1cIjI0MFwiIGhlaWdodD1cIjI0MFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cclxuICAgICAgICAgICAgPHJlY3Qgd2lkdGg9XCIyNDBcIiBoZWlnaHQ9XCIyNDBcIiBmaWxsPVwiJHtjb2xvcn1cIi8+XHJcbiAgICAgICAgICAgIDx0ZXh0IHg9XCIxMjBcIiB5PVwiMTIwXCIgZm9udC1mYW1pbHk9XCJBcmlhbCwgc2Fucy1zZXJpZlwiIGZvbnQtc2l6ZT1cIjI0XCIgZm9udC13ZWlnaHQ9XCJib2xkXCIgXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbmNob3I9XCJtaWRkbGVcIiBkb21pbmFudC1iYXNlbGluZT1cIm1pZGRsZVwiIGZpbGw9XCJ3aGl0ZVwiPiR7a2V5d29yZH08L3RleHQ+XHJcbiAgICAgICAgPC9zdmc+XHJcbiAgICBgO1xyXG5cclxuICAgIGNvbnN0IGJhc2U2NCA9IEJ1ZmZlci5mcm9tKHN2ZykudG9TdHJpbmcoJ2Jhc2U2NCcpO1xyXG4gICAgcmV0dXJuIGBkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LCR7YmFzZTY0fWA7XHJcbn0gIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImNyeXB0byIsIlBPU1QiLCJyZXF1ZXN0IiwiY29uc29sZSIsImxvZyIsInN1YmplY3REZXNjcmlwdGlvbiIsImtleXdvcmRzIiwianNvbiIsImxlbmd0aCIsImVycm9yIiwic3RhdHVzIiwicHJvY2VzcyIsImVudiIsIlZPTENfQUNDRVNTX0tFWSIsIlZPTENfU0VDUkVUX0tFWSIsImVtb2ppcyIsImkiLCJrZXl3b3JkIiwicHJvbXB0IiwiaW1hZ2VEYXRhIiwiZ2VuZXJhdGVJbWFnZVdpdGhWb2xjQUkiLCJwdXNoIiwiaWQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJnZW5lcmF0ZVBsYWNlaG9sZGVySW1hZ2UiLCJhY2Nlc3NLZXkiLCJzZWNyZXRLZXkiLCJyZWdpb24iLCJzZXJ2aWNlIiwiaG9zdCIsImVuZHBvaW50IiwicmVxdWVzdEJvZHkiLCJyZXFfa2V5Iiwid2lkdGgiLCJoZWlnaHQiLCJzY2FsZSIsInNlZWQiLCJkZGltX3N0ZXBzIiwicmV0dXJuX3VybCIsInVzZV9zciIsImxvZ29faW5mbyIsImFkZF9sb2dvIiwiYm9keVN0cmluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJxdWVyeVBhcmFtcyIsImZvcm1hdFF1ZXJ5IiwicGFyYW1ldGVycyIsInJlcXVlc3RQYXJhbWV0ZXJzIiwia2V5IiwiT2JqZWN0Iiwia2V5cyIsInNvcnQiLCJzbGljZSIsImNhbm9uaWNhbFF1ZXJ5c3RyaW5nIiwidCIsIkRhdGUiLCJjdXJyZW50RGF0ZSIsInRvSVNPU3RyaW5nIiwicmVwbGFjZSIsImRhdGVzdGFtcCIsInNwbGl0IiwicGF5bG9hZEhhc2giLCJjcmVhdGVIYXNoIiwidXBkYXRlIiwiZGlnZXN0IiwiY29udGVudFR5cGUiLCJjYW5vbmljYWxIZWFkZXJzIiwic2lnbmVkSGVhZGVycyIsImNhbm9uaWNhbFJlcXVlc3QiLCJqb2luIiwiYWxnb3JpdGhtIiwiY3JlZGVudGlhbFNjb3BlIiwic3RyaW5nVG9TaWduIiwic2lnbiIsIm1zZyIsImNyZWF0ZUhtYWMiLCJrRGF0ZSIsImtSZWdpb24iLCJrU2VydmljZSIsImtTaWduaW5nIiwic2lnbmF0dXJlIiwiYXV0aG9yaXphdGlvbkhlYWRlciIsImhlYWRlcnMiLCJyZXF1ZXN0VXJsIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJvayIsImVycm9yVGV4dCIsInRleHQiLCJFcnJvciIsInN0YXR1c1RleHQiLCJyZXN1bHQiLCJjb2RlIiwiZGF0YSIsImltYWdlX3VybHMiLCJpbWFnZVVybCIsImltYWdlUmVzcG9uc2UiLCJpbWFnZUJ1ZmZlciIsImFycmF5QnVmZmVyIiwiYmFzZTY0IiwiQnVmZmVyIiwiZnJvbSIsInRvU3RyaW5nIiwiYmluYXJ5X2RhdGFfYmFzZTY0IiwiYmFzZTY0RGF0YSIsIm1lc3NhZ2UiLCJjb2xvcnMiLCJjb2xvckluZGV4IiwiY29sb3IiLCJzdmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/generate-emojis/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-emojis%2Froute&page=%2Fapi%2Fgenerate-emojis%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-emojis%2Froute.ts&appDir=F%3A%5Cemjio%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=F%3A%5Cemjio&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();